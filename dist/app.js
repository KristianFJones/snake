!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n.r(t);var r={up:38,down:40,left:37,right:39,enter:13,R:82,H:72,J:74,K:75,L:76},i=[r.K,r.H,r.L,r.J],o=[r.up,r.left,r.right,r.down],a=[].concat(o,i),l=r;function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.move(t,n)}var t,n,r;return t=e,(n=[{key:"move",value:function(e,t){this.x=e,this.y=t}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}}])&&c(t.prototype,n),r&&c(t,r),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.points=[new u],this.headed=l.right,this.tail=0,this.alive=!0}var t,n,r;return t=e,(n=[{key:"getHead",value:function(){return this.points[0]}},{key:"consume",value:function(){this.points.push(Object.assign({},this.getHead())),++this.tail}},{key:"tick",value:function(){var e=this,t=l.up,n=l.left,r=l.right,i=l.down,o=this.getHead(),a=new u(o.x,o.y);switch(this.headed){case t:--a.y;break;case i:++a.y;break;case n:--a.x;break;case r:++a.x;break;default:throw new Error("wat")}return this.points.unshift(a),this.points.pop(),this.points.slice(1).forEach((function(t){t.x===a.x&&t.y===a.y&&(e.alive=!1)})),a}}])&&f(t.prototype,n),r&&f(t,r),e}(),h=new AudioContext,d=h.createGain();d.gain.value=.3,d.connect(h.destination);var v,p=-1,y=!0,w=[16.35,18.35,20.6,21.83,24.5,27.5,30.87,32.7];!function(e){e[e.INTRO=0]="INTRO",e[e.INGAME=1]="INGAME",e[e.DEAD=2]="DEAD"}(v||(v={}));var g={screen:v.INTRO,player:null,width:0,height:0,food:null};function x(e,t){return(0,Math.floor)((0,Math.random)()*(t-e+1))+e}function b(e){for(var t=g.player.points,n=0;n<t.length;++n){if(t[n].equals(e))return!0}return!1}function m(){var e,t=g.width,n=g.height;do{e=new u(x(0,t-1),x(0,n-1))}while(b(e));g.food.move(e.x,e.y),++g.player.tail}function k(){var e=g.player,t=e.getHead();t.x===g.food.x&&t.y===g.food.y&&(m(),e.consume(),function(){var e=h.createOscillator(),t=h.createOscillator();y?++p===w.length-1&&(y=!1):0===--p&&(y=!0);var n=10*w[p];e.frequency.value=n,e.type="sawtooth",t.frequency.value=n,t.type="triangle",e.connect(d),t.connect(d),e.start(h.currentTime),t.start(h.currentTime),e.stop(h.currentTime+.25),t.stop(h.currentTime+.25)}());var n=e.tick(),r=n.x,i=n.y;(r<0||i<0||r>g.width-1||i>g.height-1)&&(e.alive=!1)}function T(e,t){return g.width=e,g.height=t,g.player=new s,g.food=new u,m(),g}var O,A=!1,E=function(e,t){if(A)return console.log("restoring cache",A),void t.restore();var n=50,r=function(t){var r=t*e;return n+=r,r};t.font="".concat(r(1.5),"px sans-serif"),t.strokeText("Snake",10,n,2.5*e),t.font="".concat(r(.7),"px Arial"),t.fillText("by avindra",65,n),t.font="".concat(r(.55),"px Arial"),t.fillText("Use arrow keys to move.",10,n),t.font="".concat(r(.85),"px Arial"),t.fillText("Press ENTER to start",10,n),A||(t.save(),A=!0)},R=function(e,t,n,r){var i=t.player,o=t.food;e.fillStyle="black",e.fillRect(0,0,n.width,n.height);var a=i.alive;e.fillStyle=a?"red":"white",e.fillRect(o.x*r,o.y*r,r,r),e.fillStyle=a?"white":"red",i.points.forEach((function(t){return e.fillRect(t.x*r,t.y*r,r,r)}));var c=i.getHead();e.fillStyle="green";var u=0,f=c.x*r,s=c.y*r,h=r/5,d=r-h;switch(i.headed!==l.down&&i.headed!==l.right||(u=d),i.headed){case l.down:case l.up:e.fillRect(f,s+u,h,h),e.fillRect(f+d,s+u,h,h);break;case l.right:case l.left:e.fillRect(f+u,s,h,h),e.fillRect(f+u,s+d,h,h);break;default:throw new Error("wat")}var v=i.points.length-1;a?k():function(e,t,n){var r=50,i=function(t){var n=t*e;return r+=n,n};t.font="".concat(i(1.5),"px Arial"),t.fillText("You died :/",10,r),t.font="".concat(i(.7),"px Arial"),t.fillText("Your final score is ".concat(n),17,r),t.font="".concat(i(1.4),"px Arial"),t.fillText("Press R to respawn",10,r)}(r,e,v)},M=(O="game",document.getElementById(O)),j=M.getContext("2d"),I=window.innerHeight/20,N=T(20,20),S=50;window.onkeydown=function(e){var t,n,r=e.keyCode,c=N.player,u=(t=r,-1!==(n=i.indexOf(t))?o[n]:t);u===l.R?(N=T(20,20)).screen=v.INGAME:u===l.enter&&(N.screen=v.INGAME),a.find((function(e){return e===u}))&&(e.preventDefault(),c.headed=u)},M.width=20*I,M.height=20*I,requestAnimationFrame((function e(){var t=N.screen;t===v.INTRO?E(I,j):t===v.INGAME&&R(j,N,M,I),setTimeout((function(){requestAnimationFrame(e)}),S)}))}]);